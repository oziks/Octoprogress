{% extends "layout.html" %}

{% block title %}
{{ user.name }} profile
{% endblock %}

{% block content %}
<div class="row">
    <div class="span3 vcard">
        <img src="{{ user.avatarUrl }}"></a></span>
        <ul class="details">
            <li><i class="icon-user"></i>{{ user.name }} (<a href="{{ user.githubProfile }}">{{ user.login }}</a>)</li>
            <li><i class="icon-group"></i> {{ user.company }}</li>
            <li><i class="icon-globe"></i>{{ user.location }}</li>
            <li><i class="icon-link"></i><a href="mailto:{{ user.email }}">{{ user.email }}</a></li>
            <li><i class="icon-refresh"></i><a href="{{ path('job_project_update') }}">refresh project cache</a></li>
        </ul>
    </div>
    <div class="span9 repositories">
        <ul class="list">
            <li>
                <h3>Active projects board
                    <div class="pull-right"><a href="{{ path('board_active_form') }}" data-toggle="modal">add</a></div>
                </h3>
                {% if repositories %}
                {% for repository in repositories %}
                <blockquote><i class="icon-book"></i>
                    <a href="{{ path('board', {'id': repository.id})}}"><strong>{{ repository.name }}</strong></a>
                    {% if repository.description %} - {{ repository.description }}{% endif %}
                    (<i class="icon-trash"></i><a href="{{ path('board_remove', {'id': repository.id}) }}">remove board</a>)
                </blockquote>
                {% endfor %}
                {% endif %}
            </li>
        </ul>
    </div>
</div>
{% endblock %}

{% block javascripts %}
<script type="text/javascript">
$(document).ready(function () {
    $('[data-toggle="modal"]').click(function(e) {
        e.preventDefault();
        var href = $(this).attr('href');
        if (href.indexOf('#') == 0) {
            $(href).modal('open');
        } else {
            $.get(href,
            function(data) {
                $('<div class="modal" >' + data + '</div>').modal();
            }).success(function() {
                $('input:text:visible:first').focus();
            });
        }
    });
});
</script>
{% endblock %}
